<html><head><title>FoaDecoderMatrix</title><link rel='stylesheet' href='./../scdoc.css' type='text/css' /><meta http-equiv='Content-Type' content='text/html; charset=UTF-8' /><script src='./../scdoc.js' type='text/javascript'></script><script src='./../docmap.js' type='text/javascript'></script><script src='./../prettify.js' type='text/javascript'></script><script src='./../lang-sc.js' type='text/javascript'></script><script type='text/javascript'>var helpRoot='./..';</script></head><ul id='menubar'></ul><body onload='fixTOC();prettyPrint()'><div class='contents'><div class='header'><div id='label'>SuperCollider CLASSES</div><div id='categories'><a href='./../Browse.html#Libraries>Ambisonic Toolkit>FOA>Decoding'>Libraries>Ambisonic Toolkit>FOA>Decoding</a></div><h1>FoaDecoderMatrix</h1><div id='summary'>First Order Ambisonic (FOA) decoder matrices</div></div><div class='subheader'>
<div id='filename'>Source: /Users/josephla/Library/Application Support/SuperCollider/Extensions/DXClasses/AtkClasses/<a href='file:///Users/josephla/Library/Application Support/SuperCollider/Extensions/DXClasses/AtkClasses/ATKMatrix.sc'>ATKMatrix.sc</a></div><div class='inheritance'>Inherits from: <a href="../Classes/Object.html">Object</a></div><div id='related'>See also: <a href="./../Classes/FoaDecoderKernel.html">FoaDecoderKernel</a>, <a href="./../Classes/FoaDecode.html">FoaDecode</a></div>[ <a href='nil'>old help</a> ]</div><div id='toc'>
<ul class='toc'><li class='toc1'><a href='#description'>Description</a></li>
<ul class='toc'></ul><li class='toc1'><a href='#classmethods'>Class methods</a></li>
<ul class='toc'><li class='toc3'><a href='#*newMono'>newMono</a> </li>
<li class='toc3'><a href='#*newStereo'>newStereo</a> </li>
<li class='toc3'><a href='#*newQuad'>newQuad</a> </li>
<li class='toc3'><a href='#*new5_0'>new5_0</a> </li>
<li class='toc3'><a href='#*newPanto'>newPanto</a> </li>
<li class='toc3'><a href='#*newPeri'>newPeri</a> </li>
<li class='toc3'><a href='#*newDiametric'>newDiametric</a> </li>
<li class='toc3'><a href='#*newBtoA'>newBtoA</a> </li>
<li class='toc2'><a href='#decoder_k'>Decoder k</a></li>
<ul class='toc'></ul><li class='toc2'><a href='#inherited_class_methods'>Inherited class methods</a></li>
<ul class='toc'></ul></ul><li class='toc1'><a href='#instancemethods'>Instance methods</a></li>
<ul class='toc'><li class='toc3'><a href='#-kind'>kind</a> </li>
<li class='toc3'><a href='#-dim'>dim</a> </li>
<li class='toc3'><a href='#-numChannels'>numChannels</a> </li>
<li class='toc3'><a href='#-dirChannels'>dirChannels</a> </li>
<li class='toc3'><a href='#-matrix'>matrix</a> </li>
<li class='toc3'><a href='#-shelfFreq'>shelfFreq</a> </li>
<li class='toc3'><a href='#-shelfK'>shelfK</a> </li>
<li class='toc3'><a href='#-numOutputs'>numOutputs</a> </li>
<li class='toc3'><a href='#-dirOutputs'>dirOutputs</a> </li>
<li class='toc3'><a href='#-numInputs'>numInputs</a> </li>
<li class='toc3'><a href='#-dirInputs'>dirInputs</a> </li>
<li class='toc2'><a href='#inherited_instance_methods'>Inherited instance methods</a></li>
<ul class='toc'></ul></ul><li class='toc1'><a href='#examples'>Examples</a></li>
<ul class='toc'></ul></ul></div><h2><a class='anchor' name='description'>Description</a></h2>
<p>Generates decoding matrices required by the Ambisonic Toolkit's first order decoder, <a href="./../Classes/FoaDecode.html">FoaDecode</a>.
<h2><a class='anchor' name='classmethods'>Class Methods</a></h2>
<h3 class='cmethodname'><span class='methprefix'><a class='anchor' name='*newMono'>*</a></span><a href='./../Overviews/Methods.html#newMono'>newMono</a> (<span class='argstr'>theta = 0</span>, <span class='argstr'>phi = 0</span>, <span class='argstr'>pattern = 0</span>)</h3>
<div class='method'><p>Virtual microphone monophonic decoder.
<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'> theta <td class='argumentdesc'><p>Azimuth angle, in radians: pi to pi.neg.
<tr><td class='argumentname'> phi <td class='argumentdesc'><p>Elevation angle, in radians: pi/2 to pi.neg/2.
<tr><td class='argumentname'> pattern <td class='argumentdesc'><p>Virtual microphone pattern, 0 to 1:
<table>
<tr><td><strong>pattern</strong> <td><strong>virtual microphone</strong><tr><td> 0.0 <td>Omni
<tr><td>0.5 <td>Cardioid
<tr><td>1.0 <td>Bi-directional
</table>
</table><h4>Discussion:</h4>
<p>The virtual microphone decoder returns a single monophonic channel, and can be used to "listen in" to the soundfield at the specified azimuth and elevation.
</div><h3 class='cmethodname'><span class='methprefix'><a class='anchor' name='*newStereo'>*</a></span><a href='./../Overviews/Methods.html#newStereo'>newStereo</a> (<span class='argstr'>angle</span>, <span class='argstr'>pattern = 0.5</span>)</h3>
<div class='method'><p>Virtual microphone stereophonic decoder.
<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'> angle <td class='argumentdesc'><p>The half angle of the stereo pair, in radians: 0 to pi., Default: pi/2
<tr><td class='argumentname'> pattern <td class='argumentdesc'><p>Virtual microphone pattern, 0 to 1:
<table>
<tr><td><strong>pattern</strong> <td><strong>virtual microphone</strong><tr><td> 0.0 <td>Omni
<tr><td>0.5 <td>Cardioid
<tr><td>1.0 <td>Bi-directional
</table>
</table><h4>Discussion:</h4>
<p>Standard coincident stereo microphone configurations<a class='footnote anchor' name='footnote_org_1' href='#footnote_1'><sup>1</sup></a> <pre class='code prettyprint lang-sc'>
// Default: Cardioids at 180 deg
~decoder = <a class='clslnk' href='./../Classes/FoaDecoderMatrix.html'>FoaDecoderMatrix</a>.newStereo

// Blumlein
~angle = pi/2
~pattern = 1.0
~decoder = <a class='clslnk' href='./../Classes/FoaDecoderMatrix.html'>FoaDecoderMatrix</a>.newStereo(~angle, ~pattern)

// Cardioids at 131 deg
~angle = 131/2 * pi/180
~pattern = 0.5
~decoder = <a class='clslnk' href='./../Classes/FoaDecoderMatrix.html'>FoaDecoderMatrix</a>.newStereo(~angle, ~pattern)

// Super-cardioids at 115 deg
~angle = 115/2 * pi/180
~pattern = 0.63
~decoder = <a class='clslnk' href='./../Classes/FoaDecoderMatrix.html'>FoaDecoderMatrix</a>.newStereo(~angle, ~pattern)

// Hyper-cardioids at 105 deg
~angle = 105/2 * pi/180
~pattern = 0.75
~decoder = <a class='clslnk' href='./../Classes/FoaDecoderMatrix.html'>FoaDecoderMatrix</a>.newStereo(~angle, ~pattern)

</pre>
<p>While the virtual microphone stereophonic decoder is very easy and convenient, for production work the authors advise using the UHJ ( <a href="./../Classes/FoaDecoderKernel.html#*newUHJ">FoaDecoderKernel: *newUHJ</a> ) decoder.<a class='footnote anchor' name='footnote_org_2' href='#footnote_2'><sup>2</sup></a> </div><h3 class='cmethodname'><span class='methprefix'><a class='anchor' name='*newQuad'>*</a></span><a href='./../Overviews/Methods.html#newQuad'>newQuad</a> (<span class='argstr'>angle</span>, <span class='argstr'>k = 'single'</span>)</h3>
<div class='method'><p>Optimised quadraphonic decoder with variable loudspeaker angle.
<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'> angle <td class='argumentdesc'><p>The half angle of the front (and rear) loudspeaker pair. Defaults to pi/4, a square. In radians.
<tr><td class='argumentname'> k <td class='argumentdesc'><p>The k factor of the decoder. May be specified as a float: 0.5 to 1.0. Or more conviently by name:
<ul>
<li><code class='code prettyprint lang-sc'>'single'</code>
<li> <code class='code prettyprint lang-sc'>'dual'</code>
<li> <code class='code prettyprint lang-sc'>'velocity'</code>
<li> <code class='code prettyprint lang-sc'>'energy'</code>
<li> <code class='code prettyprint lang-sc'>'controlled'</code>
</ul>
</table><h4>Discussion:</h4>
<p> The outputs are in anti-clockwise order. The position of the first speaker is left of centre. <a href="#-dirChannels">-dirChannels</a> may be used to query resulting loudspeaker directions.
<p>Varying <strong>angle</strong> allows a number of flexible quadraphonic decoders to be generated. E.g, <strong>angle</strong> = pi/6 returns a decoder with loudspeakers at [ 30, 150, -150, 30 ] degrees.
<p>Please see <a href="#decoder_k">decoder_k</a> for further discussion on <strong>k</strong>.
</div><h3 class='cmethodname'><span class='methprefix'><a class='anchor' name='*new5_0'>*</a></span><a href='./../Overviews/Methods.html#new5_0'>new5_0</a> (<span class='argstr'>irregKind = 'focused'</span>)</h3>
<div class='method'><a href="http://www.brucewiggins.co.uk/?page_id=78##Bruce Wiggins'">Bruce Wiggins'</a> optimised ITU 5.0 decoders.<a class='footnote anchor' name='footnote_org_3' href='#footnote_3'><sup>3</sup></a> <h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'> irregKind <td class='argumentdesc'><p>Three kinds are available:
<ul>
<li><code class='code prettyprint lang-sc'>'focused'</code>
<li> <code class='code prettyprint lang-sc'>'equal'</code>
<li> <code class='code prettyprint lang-sc'>'four'</code>
</ul>
</table><h4>Discussion:</h4>
<p> 
The outputs are in anti-clockwise order. The position of the first speaker is centre. <a href="#-dirChannels">-dirChannels</a> may be used to query resulting loudspeaker directions.
<strong>irregKind</strong> <code class='code prettyprint lang-sc'> = 'focused'</code>
 returns a focused, but front weighted image. <code class='code prettyprint lang-sc'>'equal'</code>
 equalises the angles across the image. <code class='code prettyprint lang-sc'>'four'</code>
 is similar to <code class='code prettyprint lang-sc'>'equal'</code>
, but doesn't use the centre speaker.
</div><h3 class='cmethodname'><span class='methprefix'><a class='anchor' name='*newPanto'>*</a></span><a href='./../Overviews/Methods.html#newPanto'>newPanto</a> (<span class='argstr'>numChans = 4</span>, <span class='argstr'>orientation = 'flat'</span>, <span class='argstr'>k = 'single'</span>)</h3>
<div class='method'><p>Pantophonic (2D) regular polygon decoder.
<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'> numChans <td class='argumentdesc'><p>number of loudspeaker feeds
<tr><td class='argumentname'> orientation <td class='argumentdesc'><code class='code prettyprint lang-sc'>'flat'</code>
 or <code class='code prettyprint lang-sc'>'point'</code>
<tr><td class='argumentname'> k <td class='argumentdesc'><p>The k factor of the decoder. May be specified as a float: 0.5 to 1.0. Or more conviently by name:
<ul>
<li><code class='code prettyprint lang-sc'>'single'</code>
<li> <code class='code prettyprint lang-sc'>'dual'</code>
<li> <code class='code prettyprint lang-sc'>'velocity'</code>
<li> <code class='code prettyprint lang-sc'>'energy'</code>
<li> <code class='code prettyprint lang-sc'>'controlled'</code>
</ul>
</table><h4>Discussion:</h4>
<p> The outputs are in anti-clockwise order. The position of the first speaker is either centre or left of centre. <a href="#-dirChannels">-dirChannels</a> may be used to query resulting loudspeaker directions.
<p>Used in conjunction with <a href="./../Classes/FoaDecode.html#*ar">FoaDecode: *ar</a> the resulting decoder is equivalent to <a href="./../Classes/DecodeB2.html#*ar">DecodeB2: *ar</a> (SuperCollider's inbuilt decoder), albeit with the addition of variable <strong>k</strong> and dual-band optimised psychoacoustic decoding. <a href="./../Classes/DecodeB2.html#*ar">DecodeB2: *ar</a> is a "controlled opposites" decoder ( <strong>k</strong> = <code class='code prettyprint lang-sc'>'controlled'</code>
 ) with a gain of 6dB greater than <a href="#*newPanto">*newPanto</a>.
<p>Please see <a href="#decoder_k">decoder_k</a> for further discussion on <strong>k</strong>.
</div><h3 class='cmethodname'><span class='methprefix'><a class='anchor' name='*newPeri'>*</a></span><a href='./../Overviews/Methods.html#newPeri'>newPeri</a> (<span class='argstr'>numChanPairs = 4</span>, <span class='argstr'>elevation = 0.61547970867039</span>, <span class='argstr'>orientation = 'flat'</span>, <span class='argstr'>k = 'single'</span>)</h3>
<div class='method'><p>Periphonic (3D) dual ring, regular cylindrical decoder.
<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'> numChanPairs <td class='argumentdesc'><p>Number of channel pairs. (Half the total number of loudspeaker feeds.)
<tr><td class='argumentname'> elevation <td class='argumentdesc'><p>Elevation of the upper ring, measured from the origin. In radians.
<tr><td class='argumentname'> orientation <td class='argumentdesc'><code class='code prettyprint lang-sc'>'flat'</code>
 or <code class='code prettyprint lang-sc'>'point'</code>
<tr><td class='argumentname'> k <td class='argumentdesc'><p>The k factor of the decoder. May be specified as a float: 0.5 to 1.0. Or more conviently by name:
<ul>
<li><code class='code prettyprint lang-sc'>'single'</code>
<li> <code class='code prettyprint lang-sc'>'dual'</code>
<li> <code class='code prettyprint lang-sc'>'velocity'</code>
<li> <code class='code prettyprint lang-sc'>'energy'</code>
<li> <code class='code prettyprint lang-sc'>'controlled'</code>
</ul>
</table><h4>Discussion:</h4>
<p>  The outputs are in anti-clockwise order, beginning with the top ring. The position of the first speaker is either centre or left of centre. <a href="#-dirChannels">-dirChannels</a> may be used to query resulting loudspeaker directions.
<p>Please see <a href="#decoder_k">decoder_k</a> for further discussion on <strong>k</strong>.
</div><h3 class='cmethodname'><span class='methprefix'><a class='anchor' name='*newDiametric'>*</a></span><a href='./../Overviews/Methods.html#newDiametric'>newDiametric</a> (<span class='argstr'>directions</span>, <span class='argstr'>k = 'single'</span>)</h3>
<div class='method'><p>Gerzon's classic diametric decoder, suitable for varied periphonic and pantophonic loudspeaker arrays.<a class='footnote anchor' name='footnote_org_4' href='#footnote_4'><sup>4</sup></a> <h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'> directions <td class='argumentdesc'><p>An array of directions for half of the loudspeaker feeds for the desired decoder. Specify in radians.
<p>Rank 1 arrays return pantophonic, while rank 2 arrays return periphonic. E.g.,
<pre class='code prettyprint lang-sc'>
// 2D:
~directions = [ theta0, theta1, ... thetaN ];
</pre>
<pre class='code prettyprint lang-sc'>
// 3D:
~directions = [ [ theta0, phi0 ], [ theta1, phi1 ], ... [ thetaN, phiN ] ];
</pre>
<tr><td class='argumentname'> k <td class='argumentdesc'><p>The k factor of the decoder. May be specified as a float: 0.5 to 1.0. Or more conviently by name:
<ul>
<li><code class='code prettyprint lang-sc'>'single'</code>
<li> <code class='code prettyprint lang-sc'>'dual'</code>
<li> <code class='code prettyprint lang-sc'>'velocity'</code>
<li> <code class='code prettyprint lang-sc'>'energy'</code>
<li> <code class='code prettyprint lang-sc'>'controlled'</code>
</ul>
</table><h4>Discussion:</h4>
<p> 
<strong>directions</strong> specifies only half of the loudspeakers for the resulting array, the remaining loudspeakers are diametrically opposite (through the origin). <a href="#-dirChannels">-dirChannels</a> may be used to query resulting loudspeaker directions.
<pre class='code prettyprint lang-sc'>
// Pantophonic (2D) decoder with four channels arranged in a rectangle:
// [ 30, -30, -150, 150 ]

// specify 1/2 the desired directions
~directions = pi/180 * [ 30, -30 ];
~decoder = <a class='clslnk' href='./../Classes/FoaDecoderMatrix.html'>FoaDecoderMatrix</a>.newDiametric(~directions);

// inspect
~decoder.dirChannels * 180/pi
</pre>
<pre class='code prettyprint lang-sc'>
// Periphonic (3D) decoder with eight channels arranged in a bi-rectangle:
// [ [ 30, 0 ], [ -30, 0 ], [ 90, 35.3 ], [ -90, 35.3 ],
//   [ -150, -0 ], [ 150, -0 ], [ -90, -35.3 ], [ 90, -35.3 ] ]

// specify 1/2 the desired directions
~directions = pi/180 * [ [ 30, 0 ], [ -30, 0 ], [ 90, 35.3 ], [ -90, 35.3] ];
~decoder = <a class='clslnk' href='./../Classes/FoaDecoderMatrix.html'>FoaDecoderMatrix</a>.newDiametric(~directions);

// inspect
~decoder.dirChannels * 180/pi
</pre>
<p>Please see <a href="#decoder_k">decoder_k</a> for further discussion on <strong>k</strong>.
</div><h3 class='cmethodname'><span class='methprefix'><a class='anchor' name='*newBtoA'>*</a></span><a href='./../Overviews/Methods.html#newBtoA'>newBtoA</a> (<span class='argstr'>orientation = 'flu'</span>, <span class='argstr'>weight = 'dec'</span>)</h3>
<div class='method'><p>B-format to A-format decoder. Decodes to a variety of tetrahedral orientations and W channel weights.
<h4>Arguments:</h4>
<table class='arguments'>
<tr><td class='argumentname'> orientation <td class='argumentdesc'><p>Orientation of the A-format tetrahedron.
<table>
<tr><td><strong>orientation</strong> <td><strong>angles</strong> ([theta, phi] in degrees)
<tr><td><code class='code prettyprint lang-sc'>'flu'</code>
 <td><code class='code prettyprint lang-sc'> [[45.0,  35.3], [-45.0, -35.3], [135.0, -35.3], [-135.0,  35.3]] </code>
<tr><td> <code class='code prettyprint lang-sc'>'fld'</code>
 <td><code class='code prettyprint lang-sc'> [[45.0, -35.3], [-45.0 , 35.3], [135.0,  35.3], [-135.0, -35.3]] </code>
<tr><td> <code class='code prettyprint lang-sc'>'flr'</code>
 <td><code class='code prettyprint lang-sc'> [[54.7,   0.0], [-54.7,   0.0], [180.0,  54.7], [ 180.0, -54.7]] </code>
<tr><td> <code class='code prettyprint lang-sc'>'fud'</code>
 <td><code class='code prettyprint lang-sc'> [[ 0.0,  54.7], [  0.0, -54.7], [125.7,   0.0], [-125.7,   0.0]] </code>
<tr><td> <code class='code prettyprint lang-sc'>'fbd'</code>
 <td><code class='code prettyprint lang-sc'> [[ 0.0,   0.0], [180.0, -70.5], [112.2,  28.1], [-112.2,  28.1]] </code>
<tr><td> <code class='code prettyprint lang-sc'>'fbu'</code>
 <td><code class='code prettyprint lang-sc'> [[ 0.0,   0.0], [180.0,  70.5], [112.2, -28.1], [-112.2, -28.1]] </code>
<tr><td> <code class='code prettyprint lang-sc'>'flru'</code>
 <td><code class='code prettyprint lang-sc'> [[67.8,  28.1], [-67.8,  28.1], [  0.0, -70.5], [ 180.0,   0.0]] </code>
<tr><td> <code class='code prettyprint lang-sc'>'flrd'</code>
 <td><code class='code prettyprint lang-sc'> [[67.8, -28.1], [-67.8, -28.1], [  0.0,  70.5], [ 180.0,   0.0]] </code>
</table>
<tr><td class='argumentname'> weight <td class='argumentdesc'><p>The W weight factor.
<table>
<tr><td><strong>weight</strong> <td><strong>kind</strong> <td><strong>W scale</strong><tr><td> <code class='code prettyprint lang-sc'>'dec'</code>
 <td>Decorrelated (on the sphere) <td>1/sqrt(3)
<tr><td><code class='code prettyprint lang-sc'>'can'</code>
 <td>Canonical (B-format) <td>1/sqrt(2)
<tr><td><code class='code prettyprint lang-sc'>'uns'</code>
 <td>Unscaled <td>1
<tr><td><code class='code prettyprint lang-sc'>'car'</code>
 <td>Cardioid <td>sqrt(3)
</table>
</table><h4>Discussion:</h4>
<a class='anchor' name='btoadiscuss'>&nbsp;</a>The B-format to A-format decoder is primarily intended to be used in conjuction with the A-format to B-format encoder, <a href="./../Classes/FoaEncoderMatrix.html#*newAtoB">FoaEncoderMatrix: *newAtoB</a>. Though the use of BtoA/AtoB decoder/encoder pairs, signal processing networks can be constructed which preserve the spatial encoding found in the original input B-format signal.
<pre class='code prettyprint lang-sc'>
// ------------------------------------------------------------
// Single stage allpass ambience in A-format
//
// mono pink noise source
// <a class='clslnk' href='./../Classes/FoaPanB.html'>FoaPanB</a> encoder
//
// quad decoder


// decoder matrix
~decoder = <a class='clslnk' href='./../Classes/FoaDecoderMatrix.html'>FoaDecoderMatrix</a>.newQuad

// b-to-a, a-to-b matrices
~b2a = <a class='clslnk' href='./../Classes/FoaDecoderMatrix.html'>FoaDecoderMatrix</a>.newBtoA
~a2b = <a class='clslnk' href='./../Classes/FoaEncoderMatrix.html'>FoaEncoderMatrix</a>.newAtoB

// inspect
~decoder.kind
~decoder.numChannels
~decoder.dirChannels * 180/pi

(
{
    var sig;                            // audio signal
    var azim;                    	// azimuth control
    var fl, bl, br, fr;                 // quad output channels
    var delaytime, decaytime;		// allpass parameters


    // display decoder
    "Ambisonic decoding via % decoder".format(~decoder.kind).postln;

    // ------------------------------------------------------------
    // parameters
    delaytime = 0.1;
    decaytime = 0.2;

    // azimuth -&gt; hard left     = back
    //            centre        = centre
    //            hard right    = back
    azim = <a class='clslnk' href='./../Classes/MouseX.html'>MouseX</a>.kr(pi, -pi);

    // ------------------------------------------------------------
    // test sig
    sig = <a class='clslnk' href='./../Classes/PinkNoise.html'>PinkNoise</a>.ar * <a class='clslnk' href='./../Classes/LFPulse.html'>LFPulse</a>.ar(2.0); // enveloped mono pink noise


    // ------------------------------------------------------------
    // encode to b-format
    sig = <a class='clslnk' href='./../Classes/FoaPanB.html'>FoaPanB</a>.ar(sig, azim);

    // ------------------------------------------------------------
    // b-to-a --&gt; allpass --&gt; a-to-b
    sig = <a class='clslnk' href='./../Classes/FoaDecode.html'>FoaDecode</a>.ar(sig, ~b2a);
    sig = <a class='clslnk' href='./../Classes/AllpassN.html'>AllpassN</a>.ar(sig, delaytime, <a class='clslnk' href='./../Classes/Array.html'>Array</a>.fill(4, {delaytime}).rand, decaytime);
    sig = <a class='clslnk' href='./../Classes/FoaEncode.html'>FoaEncode</a>.ar(sig, ~a2b);


    // ------------------------------------------------------------
    // decode (to quad)
    #fl, bl, br, fr = <a class='clslnk' href='./../Classes/FoaDecode.html'>FoaDecode</a>.ar(sig, ~decoder);
    [fl, fr, bl, br]    // reorder output to match speaker arrangement

}.scope;
)
// ------------------------------------------------------------
</pre>
</div><h3><a class='anchor' name='decoder_k'>Decoder k</a></h3>
<p>The default <strong>k</strong> ( <code class='code prettyprint lang-sc'>'single'</code>
 ), for decoders accepting <strong>k</strong> as an argument, returns an <code class='code prettyprint lang-sc'>'energy'</code>
 optimised (aka "max rE") decoder. <code class='code prettyprint lang-sc'>'dual'</code>
 returns a dual-band psychoacoustically optimised decoder.<a class='footnote anchor' name='footnote_org_5' href='#footnote_5'><sup>5</sup></a> The <code class='code prettyprint lang-sc'>'dual'</code>
 decoder is the optimum choice for small scale studio or domestic settings. <code class='code prettyprint lang-sc'>'single'</code>
 is suitable for larger, mid-scale environments. <code class='code prettyprint lang-sc'>'velocity'</code>
 returns "strict soundfield" (aka "basic") decoding, and is not preferred for first order Ambisonics in most circumstances. <code class='code prettyprint lang-sc'>'controlled'</code>
 returns "controlled opposites" decoding (aka "in phase"), which is often preferred in large-scale, concert environments.<a class='footnote anchor' name='footnote_org_6' href='#footnote_6'><sup>6</sup></a> (SuperCollider's inbuilt decoder, <a href="./../Classes/DecodeB2.html#*ar">DecodeB2: *ar</a>, is a "controlled opposites" decoder. See <a href="./../Classes/FoaDecode.html#supercollider's_inbuilt_decoder">this</a>.)
<p>The <strong>k</strong> keywords translate to numerical values as follows:
<table>
<tr><td><strong>keyword</strong> <td><strong>k</strong><tr><td> <code class='code prettyprint lang-sc'>'velocity'</code>
 <td>1
<tr><td><code class='code prettyprint lang-sc'>'energy'</code>
 <td>1/sqrt(2)
<tr><td><code class='code prettyprint lang-sc'>'controlled'</code>
 <td>1/2
</table>
<div class='note'><span class='notelabel'>NOTE:</span> For large-scale concert presentation, the authors advise auditioning values of <strong>k</strong> between 1/2 and 1/sqrt(2).</div><h3><a class='anchor' name='inherited_class_methods'>Inherited class methods</a></h3>
<div id='inheritedclassmets'></div><h2><a class='anchor' name='instancemethods'>Instance Methods</a></h2>
<h3 class='imethodname'><span class='methprefix'><a class='anchor' name='-kind'>-</a></span><a href='./../Overviews/Methods.html#kind'>kind</a> </h3>
<div class='method'><p>Answers the kind of decoder
<h4>Discussion:</h4>
<pre class='code prettyprint lang-sc'>
// decoder
~decoder = <a class='clslnk' href='./../Classes/FoaDecoderMatrix.html'>FoaDecoderMatrix</a>.newQuad

// inspect
~decoder.kind
</pre>
<pre class='code prettyprint lang-sc'>
// decoder
~decoder = <a class='clslnk' href='./../Classes/FoaDecoderMatrix.html'>FoaDecoderMatrix</a>.newPeri

// inspect
~decoder.kind
</pre>
</div><h3 class='imethodname'><span class='methprefix'><a class='anchor' name='-dim'>-</a></span><a href='./../Overviews/Methods.html#dim'>dim</a> </h3>
<div class='method'><p>Answers the number of decoder dimensions: 2D or 3D.
<h4>Discussion:</h4>
<pre class='code prettyprint lang-sc'>
// decoder
~decoder = <a class='clslnk' href='./../Classes/FoaDecoderMatrix.html'>FoaDecoderMatrix</a>.newQuad

// inspect
~decoder.dim
</pre>
<pre class='code prettyprint lang-sc'>
// decoder
~decoder = <a class='clslnk' href='./../Classes/FoaDecoderMatrix.html'>FoaDecoderMatrix</a>.newPeri

// inspect
~decoder.dim
</pre>
</div><h3 class='imethodname'><span class='methprefix'><a class='anchor' name='-numChannels'>-</a></span><a href='./../Overviews/Methods.html#numChannels'>numChannels</a> </h3>
<div class='method'><p>Answers the number of loudspeaker feeds (output channels).
<h4>Discussion:</h4>
<pre class='code prettyprint lang-sc'>
// decoder (narrow quad)
~decoder = <a class='clslnk' href='./../Classes/FoaDecoderMatrix.html'>FoaDecoderMatrix</a>.newQuad(pi/6)

// inspect
~decoder.numChannels
</pre>
<pre class='code prettyprint lang-sc'>
// decoder (two rings of 6)
~decoder = <a class='clslnk' href='./../Classes/FoaDecoderMatrix.html'>FoaDecoderMatrix</a>.newPeri(6)

// inspect
~decoder.numChannels
</pre>
</div><h3 class='imethodname'><span class='methprefix'><a class='anchor' name='-dirChannels'>-</a></span><a href='./../Overviews/Methods.html#dirChannels'>dirChannels</a> </h3>
<div class='method'><p>Answers the direction of loudspeaker feeds, with angles in radians.
<h4>Returns:</h4>
<div class='returnvalue'><p>A rank 1 array for pantophonic, and rank 2 array for periphonic. E.g.,
<pre class='code prettyprint lang-sc'>
// 2D:
[ theta0, theta1, ... thetaN ]
</pre>
<pre class='code prettyprint lang-sc'>
// 3D
[ [ theta0, phi0 ], [ theta1, phi1 ], ... [ thetaN, phiN ] ]
</pre>
</div><h4>Discussion:</h4>
<p> Loudspeakers should be place at the angles returned (with equal radii).
<pre class='code prettyprint lang-sc'>
// decoder (narrow quad)
~decoder = <a class='clslnk' href='./../Classes/FoaDecoderMatrix.html'>FoaDecoderMatrix</a>.newQuad(pi/6)

// inspect
~decoder.dirChannels * 180/pi
</pre>
<pre class='code prettyprint lang-sc'>
// decoder (two rings of 6)
~decoder = <a class='clslnk' href='./../Classes/FoaDecoderMatrix.html'>FoaDecoderMatrix</a>.newPeri(6)

// inspect
~decoder.dirChannels * 180/pi
</pre>
<pre class='code prettyprint lang-sc'>
// Pantophonic (2D) decoder with four channels arranged in a rectangle:
~directions = pi/180 * [ 30, -30 ]
~decoder = <a class='clslnk' href='./../Classes/FoaDecoderMatrix.html'>FoaDecoderMatrix</a>.newDiametric(~directions)

// inspect
~decoder.dirChannels * 180/pi
</pre>
<pre class='code prettyprint lang-sc'>
// Periphonic (3D) decoder with eight channels arranged in a bi-rectangle:
~directions = pi/180 * [ [ 30, 0 ], [ -30, 0 ], [ 90, 35.3 ], [ -90, 35.3] ]
~decoder = <a class='clslnk' href='./../Classes/FoaDecoderMatrix.html'>FoaDecoderMatrix</a>.newDiametric(~directions)

// inspect
~decoder.dirChannels * 180/pi
</pre>
</div><h3 class='imethodname'><span class='methprefix'><a class='anchor' name='-matrix'>-</a></span><a href='./../Overviews/Methods.html#matrix'>matrix</a> </h3>
<div class='method'><p>Answers the decoding matrix
</div><h3 class='imethodname'><span class='methprefix'><a class='anchor' name='-shelfFreq'>-</a></span><a href='./../Overviews/Methods.html#shelfFreq'>shelfFreq</a> [= value]</h3>
<div class='method'><p>If the decoder is dual-band psychoacoustically optimised, get or set the shelf filter frequency, in Hz.
<h4>Discussion:</h4>
<strong>shelfFreq</strong> defaults to 400Hz, which is suitable for a well aligned domestic or studio space. <strong>shelfFreq</strong> may be set up to 700Hz, for a tight sweet-spot, and very focused single user listening.
</div><h3 class='imethodname'><span class='methprefix'><a class='anchor' name='-shelfK'>-</a></span><a href='./../Overviews/Methods.html#shelfK'>shelfK</a> </h3>
<div class='method'><p>If the decoder is dual-band psychoacoustically optimised, get or set the shelf k.
<h4>Discussion:</h4>
<p>If set, <strong>shelfK</strong> is optimised for the chosen decoder, and should be left at the assigned value unless one is an expert user.
</div><h3 class='imethodname'><span class='methprefix'><a class='anchor' name='-numOutputs'>-</a></span><a href='./../Overviews/Methods.html#numOutputs'>numOutputs</a> </h3>
<div class='method'><p>A synonym for <a href="#-numChannels">-numChannels</a></div><h3 class='imethodname'><span class='methprefix'><a class='anchor' name='-dirOutputs'>-</a></span><a href='./../Overviews/Methods.html#dirOutputs'>dirOutputs</a> </h3>
<div class='method'><p>A synonym for <a href="#-dirChannels">-dirChannels</a></div><h3 class='imethodname'><span class='methprefix'><a class='anchor' name='-numInputs'>-</a></span><a href='./../Overviews/Methods.html#numInputs'>numInputs</a> </h3>
<div class='method'><p>Answers the number of inputs for the decoder. 3 for 2D and 4 for 3D.
</div><h3 class='imethodname'><span class='methprefix'><a class='anchor' name='-dirInputs'>-</a></span><a href='./../Overviews/Methods.html#dirInputs'>dirInputs</a> </h3>
<div class='method'><p>A convenience method providing polymorphism with <a href="./../Classes/FoaEncoderMatrix.html#-dirInputs">FoaEncoderMatrix: -dirInputs</a>.
<h4>Returns:</h4>
<div class='returnvalue'><ul>
<li>for 2D: <code class='code prettyprint lang-sc'> [ inf, inf, inf ] </code>
<li> for 3D: <code class='code prettyprint lang-sc'> [ inf, inf, inf , inf ] </code>
</ul>
</div></div><h3><a class='anchor' name='inherited_instance_methods'>Inherited instance methods</a></h3>
<div id='inheritedinstmets'></div><h2><a class='anchor' name='examples'>Examples</a></h2>
<p>Please see <a href="./../Classes/FoaDecode.html#Examples">FoaDecode: Examples</a>.
<div class='footnotes'>
<a class='anchor' name='footnote_1'/><div class='footnote'>[<a href='#footnote_org_1'>1</a>] - Sengpiel Audio provides a useful tool to visualise resulting imaging: <a href="http://www.sengpielaudio.com/Visualization-Blumlein-E.htm:">http://www.sengpielaudio.com/Visualization-Blumlein-E.htm:</a></div><a class='anchor' name='footnote_2'/><div class='footnote'>[<a href='#footnote_org_2'>2</a>] - See <a href="http://en.wikipedia.org/wiki/Ambisonic_UHJ_format">http://en.wikipedia.org/wiki/Ambisonic_UHJ_format</a> for further information.</div><a class='anchor' name='footnote_3'/><div class='footnote'>[<a href='#footnote_org_3'>3</a>] - Irregular decoders in the Ambisonic Toolkit are kindly provided by Bruce Wiggins: <a href="http://www.brucewiggins.co.uk/">http://www.brucewiggins.co.uk/</a>. See also: B. Wiggins, I. Paterson-Stephens, V. Lowndes, and S. Berry, "The design and optimisation of surround sound decoders using heuristic methods," in Proceedings of UKSIM 2003: Conference on Computer Simulation, Cambridge, England, 2003.</div><a class='anchor' name='footnote_4'/><div class='footnote'>[<a href='#footnote_org_4'>4</a>] - See: M. A. Gerzon, "Practical Periphony: The Reproduction of Full-Sphere Sound," in Proceedings of the 65th Audio Engineering Engineering Society Convention, London, 1980, p. 10.</div><a class='anchor' name='footnote_5'/><div class='footnote'>[<a href='#footnote_org_5'>5</a>] - See: E. Benjamin, R. Lee, and A. Heller, "Is My Decoder Ambisonic?," in Proceedings of the 125th Audio Engineering Society Convention, San Francisco, 2008.</div><a class='anchor' name='footnote_6'/><div class='footnote'>[<a href='#footnote_org_6'>6</a>] - See: D. G. Malham, "Experience with Large Area 3-D Ambisonic Sound Systems," Proceedings of the Institute of Acoustics, vol. 14, no. 5, pp. 209â€“215, Nov. 1992.</div></div><div class='doclink'>source: <a href='file:///Users/josephla/Applications/Sound/SuperColliderJuan/HelpSource/Classes/FoaDecoderMatrix.schelp'>/Users/josephla/Applications/Sound/SuperColliderJuan/HelpSource/Classes/FoaDecoderMatrix.schelp</a></div></div></body></html>